{"version":3,"sources":["webpack:///webpack/bootstrap 0b22dc6c1d2f3529459c","webpack:///./src/anim-sequence.js"],"names":["FUNC_KEYS","MSPF","requestAnim","window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","cancelAnim","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","requestID","clearTimeout","isFinite","Number","value","tasks","newAnimId","animTasks","playing","step","now","Date","next","call","forEach","task","timeLen","loops","frame","framesStart","duration","count","loopsLeft","frames","lastFrame","reverse","length","frameCallback","timeRatio","outputRatio","Math","floor","round","anim_lastPlaying","anim_watchStart","anim_watchTimer","setInterval","document","body","style","backgroundColor","anim_watchStop","clearInterval","startTask","AnimSequence","add","valueCallback","timing","animId","stepX","stepT","nextX","t","point","getPoint","t2","t3","t1","t12","p1f","p2f","x","y","newFrame","push","remove","iRemove","some","i","splice","start","stop","getTimeRatioByFrame","validTiming","Array","isArray","every"],"mappings":"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","file":"anim-sequence.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0b22dc6c1d2f3529459c","/*\n * AnimSequence\n * https://github.com/anseki/anim-sequence\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\n// *** Currently, this code except `export` is not ES2015. ***\n\nvar\n  FUNC_KEYS = {\n    'ease': [0.25, 0.1, 0.25, 1],\n    'linear': [0, 0, 1, 1],\n    'ease-in': [0.42, 0, 1, 1],\n    'ease-out': [0, 0, 0.58, 1],\n    'ease-in-out': [0.42, 0, 0.58, 1]\n  },\n  MSPF = 1000 / 60 / 2, // precision ms/frame (FPS: 60)\n\n  requestAnim = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(callback) { setTimeout(callback, MSPF); },\n\n  cancelAnim = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.msCancelAnimationFrame ||\n    function(requestID) { clearTimeout(requestID); },\n\n  isFinite = Number.isFinite || function(value) { return typeof value === 'number' && window.isFinite(value); },\n\n  /**\n   * @callback frameCallback\n   * @param {} value - A value that was made by `valueCallback`.\n   * @param {boolean} finish\n   * @param {number} timeRatio - Progress [0, 1].\n   * @param {number} outputRatio - Progress [0, 1].\n   * @returns {} - `false` to stop.\n   */\n\n  /**\n   * @typedef {Object} task\n   * @property {number} animId\n   * @property {frameCallback} frameCallback - Callback that is called each frame.\n   * @property {number} duration\n   * @property {number} count - `0` as infinite.\n   * @property {{value, timeRatio: number, outputRatio: number}[]} frames\n   * @property {(number|null)} framesStart - The time when first frame ran, or `null` if it is not playing.\n   * @property {number} loopsLeft - A counter for loop.\n   * @property {number} lastFrame - index of last frame that ran.\n   * @property {boolean} reverse - Play backwards.\n   */\n\n  /** @type {task[]} */\n  tasks = [],\n  newAnimId = 0,\n  requestID;\n\nwindow.animTasks = tasks; // [DEBUG/]\nwindow.MSPF = MSPF; // [DEBUG/]\n\nvar playing; // [DEBUG/]\n\nfunction step() {\n  playing = true; // [DEBUG/]\n  var now = Date.now(), next = false;\n  if (requestID) {\n    cancelAnim.call(window, requestID);\n    requestID = null;\n  }\n\n  tasks.forEach(function(task) {\n    var timeLen, loops, frame;\n\n    if (!task.framesStart) { return; }\n    timeLen = now - task.framesStart;\n\n    if (timeLen >= task.duration && task.count && task.loopsLeft <= 1) {\n      frame = task.frames[(task.lastFrame = task.reverse ? 0 : task.frames.length - 1)];\n      task.frameCallback(frame.value, true, frame.timeRatio, frame.outputRatio);\n      task.framesStart = null;\n      return;\n    }\n    if (timeLen > task.duration) {\n      loops = Math.floor(timeLen / task.duration);\n      if (task.count) {\n        if (loops >= task.loopsLeft) { // Here `task.loopsLeft > 1`\n          frame = task.frames[(task.lastFrame = task.reverse ? 0 : task.frames.length - 1)];\n          task.frameCallback(frame.value, true, frame.timeRatio, frame.outputRatio);\n          task.framesStart = null;\n          return;\n        }\n        task.loopsLeft -= loops;\n      }\n      task.framesStart += task.duration * loops;\n      timeLen = now - task.framesStart;\n    }\n\n    if (task.reverse) { timeLen = task.duration - timeLen; }\n    frame = task.frames[(task.lastFrame = Math.round(timeLen / MSPF))];\n    if (task.frameCallback(frame.value, false, frame.timeRatio, frame.outputRatio\n        /* [DEBUG] */, timeLen/* [/DEBUG] */) !== false) {\n      next = true;\n    } else {\n      task.framesStart = null;\n    }\n  });\n\n  if (next) { requestID = requestAnim.call(window, step); }\n}\n\n// [DEBUG]\nwindow.anim_lastPlaying = false;\nwindow.anim_watchStart = function() {\n  window.anim_watchTimer = setInterval(function() {\n    if (playing !== window.anim_lastPlaying) {\n      document.body.style.backgroundColor = playing ? '#f7f6cb' : '#fff'; // not `''` for TRIDENT bug\n      window.anim_lastPlaying = playing;\n    }\n    playing = false;\n  }, 200);\n};\nwindow.anim_watchStop = function() { clearInterval(window.anim_watchTimer); };\n// [/DEBUG]\n\nfunction startTask(task, timeRatio) {\n  task.framesStart = Date.now();\n  if (timeRatio != null) {\n    task.framesStart -= task.duration * (task.reverse ? 1 - timeRatio : timeRatio);\n  }\n  task.loopsLeft = task.count;\n  task.lastFrame = null;\n  step();\n}\n\nvar AnimSequence = {\n  /**\n   * Callback that makes value that is required by each frame.\n   * @callback valueCallback\n   * @param {number} outputRatio - Progress [0, 1].\n   * @returns {}\n   */\n\n  /**\n   * @param {(valueCallback|null)} valueCallback - valueCallback\n   * @param {frameCallback} frameCallback - task property\n   * @param {number} duration - task property\n   * @param {number} count - task property\n   * @param {(string|number[])} timing - FUNC_KEYS or [x1, y1, x2, y2]\n   * @param {(boolean|null)} reverse - playing property\n   * @param {number|boolean} [timeRatio] - Play from the midst. [0, 1], or `false` that prevents it starting.\n   * @returns {number} - animId to control the task.\n   */\n  add: function(valueCallback, frameCallback, duration, count, timing, reverse, timeRatio) {\n    var animId = ++newAnimId, task, frames,\n      stepX, stepT, nextX, t, point;\n\n    function getPoint(t) {\n      var t2 = t * t, t3 = t2 * t, t1 = 1 - t, t12 = t1 * t1,\n        p1f = 3 * t12 * t, p2f = 3 * t1 * t2;\n      return {\n        x: p1f * timing[0] + p2f * timing[2] + t3,\n        y: p1f * timing[1] + p2f * timing[3] + t3\n      };\n    }\n\n    function newFrame(timeRatio, outputRatio) {\n      return {value: valueCallback(outputRatio),\n        timeRatio: timeRatio, outputRatio: outputRatio};\n    }\n\n    if (typeof timing === 'string') { timing = FUNC_KEYS[timing]; }\n    valueCallback = valueCallback || function() {};\n\n    // Generate `frames` list\n    if (duration < MSPF) {\n      frames = [newFrame(0, 0), newFrame(1, 1)];\n    } else {\n      stepX = MSPF / duration;\n      frames = [newFrame(0, 0)];\n\n      if (timing[0] === 0 && timing[1] === 0 && timing[2] === 1 && timing[3] === 1) { // linear\n        for (nextX = stepX; nextX <= 1; nextX += stepX) {\n          frames.push(newFrame(nextX, nextX)); // x === y\n        }\n\n      } else {\n        stepT = stepX / 10; // precision for `t`\n        nextX = stepX;\n        for (t = stepT; t <= 1; t += stepT) {\n          point = getPoint(t);\n          if (point.x >= nextX) {\n            frames.push(newFrame(point.x, point.y));\n            nextX += stepX;\n          }\n        }\n      }\n\n      frames.push(newFrame(1, 1)); // for tolerance\n    }\n\n    task = {\n      animId: animId,\n      frameCallback: frameCallback, duration: duration, count: count, // task properties\n      frames: frames,\n      reverse: !!reverse\n    };\n    tasks.push(task);\n    if (timeRatio !== false) { startTask(task, timeRatio); }\n\n    return animId;\n  },\n\n  remove: function(animId) {\n    var iRemove;\n    if (tasks.some(function(task, i) {\n      if (task.animId === animId) {\n        iRemove = i;\n        task.framesStart = null; // for `tasks.forEach` that is playing now.\n        return true;\n      }\n      return false;\n    })) {\n      tasks.splice(iRemove, 1);\n    }\n  },\n\n  /**\n   * @param {number} animId - Target task.\n   * @param {boolean} reverse - Play backwards.\n   * @param {number} [timeRatio] - Play from the midst. [0, 1]\n   * @returns {void}\n   */\n  start: function(animId, reverse, timeRatio) {\n    tasks.some(function(task) {\n      if (task.animId === animId) {\n        task.reverse = !!reverse;\n        startTask(task, timeRatio);\n        return true;\n      }\n      return false;\n    });\n  },\n\n  /**\n   * @param {number} animId - Target task.\n   * @param {boolean} [getTimeRatioByFrame] - Return timeRatio of last frame that ran. [0, 1]\n   * @returns {(number|undefined)} - timeRatio [0, 1]\n   */\n  stop: function(animId, getTimeRatioByFrame) {\n    var timeRatio;\n    tasks.some(function(task) {\n      if (task.animId === animId) {\n        if (!getTimeRatioByFrame) {\n          timeRatio = (Date.now() - task.framesStart) / task.duration;\n          if (task.reverse) { timeRatio = 1 - timeRatio; }\n          if (timeRatio < 0) {\n            timeRatio = 0;\n          } else if (timeRatio > 1) {\n            timeRatio = 1;\n          }\n        } else if (task.lastFrame != null) {\n          timeRatio = task.frames[task.lastFrame].timeRatio;\n        }\n        task.framesStart = null;\n        return true;\n      }\n      return false;\n    });\n    return timeRatio;\n  },\n\n  validTiming: function(timing) {\n    return typeof timing === 'string' ? FUNC_KEYS[timing] :\n      Array.isArray(timing) && [0, 1, 2, 3].every(function(i) {\n        return isFinite(timing[i]) && timing[i] >= 0 && timing[i] <= 1;\n      }) ? [timing[0], timing[1], timing[2], timing[3]] :\n      null;\n  }\n};\n\nexport default AnimSequence;\n\n\n\n// WEBPACK FOOTER //\n// ./src/anim-sequence.js"],"sourceRoot":""}